package main

import (
	"bytes"
	"context"
	"encoding/json"
	"fmt"
	oneinch "geth/contract/one_inch_router"
	"geth/contract/simswap"
	"github.com/ethereum/go-ethereum"
	"github.com/ethereum/go-ethereum/accounts/abi"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/common/hexutil"
	"github.com/ethereum/go-ethereum/ethclient"
	"github.com/ethereum/go-ethereum/rpc"
	solsha3 "github.com/miguelmota/go-solidity-sha3"
	"github.com/pkg/errors"
	"io/ioutil"
	"math/big"
	"net/http"
	"strings"
	"time"
)

const (
	expBase = 10
)

type Account struct {
	Nonce     string            `json:"nonce,omitempty"`
	Balance   string            `json:"balance,omitempty"`
	Code      string            `json:"code,omitempty"`
	State     map[string]string `json:"state,omitempty"`
	StateDiff map[string]string `json:"stateDiff,omitempty"`
}

type OverrideAccounts map[common.Address]Account

type roundTripperExt struct {
	c          *http.Client
	appendData json.RawMessage
}

type reqMessage struct {
	JSONRPC string            `json:"jsonrpc"`
	ID      int               `json:"id"`
	Method  string            `json:"method"`
	Params  []json.RawMessage `json:"params"`
}

var (
	SimSwapAddress = common.HexToAddress("0x1111111111111111111111111111111111111100")
	//SimSwapAddress = common.HexToAddress("0x1111111254fb6c44bac0bed2854e76f90643097d")
	MyWallet = common.HexToAddress("0x198c08797dd4341f738ec18fcd05d64f645b8228")
	//Router         = common.HexToAddress("0x00555513Acf282B42882420E5e5bA87b44D8fA6E") //kyberswap
	Router = common.HexToAddress("0x1111111254fb6c44bac0bed2854e76f90643097d") // 1inch

	DAIContract = common.HexToAddress("0x6b175474e89094c44da98b954eedeac495271d0f")
	KNCContract = common.HexToAddress("0xdeFA4e8a7bcBA345F687a2f1456F5Edd9CE97202")

	DAIBalanceOfSlot = "2"
	DAIAllowanceSlot = "3"
	KNCBalanceSlot   = "101"
	KNCAllowanceSlot = "102"

	InputData = "0x7c025200000000000000000000000000f2f400c138f9fb900576263af0bc7fcde2b1b8a8000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001800000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000defa4e8a7bcba345f687a2f1456f5edd9ce97202000000000000000000000000f2f400c138f9fb900576263af0bc7fcde2b1b8a8000000000000000000000000198c08797dd4341f738ec18fcd05d64f645b822800000000000000000000000000000000000000000000006c6b935b8bbd40000000000000000000000000000000000000000000000000003fcf9991b9031fd8440000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a600000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000007408000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000064eb5625d90000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000ba12222222228d8ba445958a75a0704d566bf2c800000000000000000000000000000000000000000000006c6b935b8bbd40000000000000000000000000000000000000000000000000000000000000800000000000000000000000ba12222222228d8ba445958a75a0704d566bf2c80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001c452bbbe2900000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000f2f400c138f9fb900576263af0bc7fcde2b1b8a80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f2f400c138f9fb900576263af0bc7fcde2b1b8a80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000631865cb34809aedf93066b49f638562c42a9751edb36df500020000000000000000022300000000000000000000000000000000000000000000000000000000000000000000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000006c6b935b8bbd40000000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000016414284aab00000000000000000000000000000000000000000000000000000000000000808000000000000000000000000000000000000000000000000000000000000024000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000000000003200000000000000000000000000000032000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000044a9059cbb00000000000000000000000061639d6ec06c13a96b5eb9560b359d7c648c77590000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a475d22a2700000000000000000000000061639d6ec06c13a96b5eb9560b359d7c648c7759000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000defa4e8a7bcba345f687a2f1456f5edd9ce972020000000000000000000000001111111254fb6c44bac0bed2854e76f90643097d000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000024432ce0a7c00000000000000000000000000000000000000000000000000000000000000808000000000000000000000000000000000000000000000000000000000000044000000000000000000000000f2f400c138f9fb900576263af0bc7fcde2b1b8a800000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a405971224000000000000000000000000defa4e8a7bcba345f687a2f1456f5edd9ce972020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000000000000000000002965c9ce5db7984500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004470bdb947000000000000000000000000defa4e8a7bcba345f687a2f1456f5edd9ce97202000000000000000000000000000000000000000000000040749b1ed4bd5678300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cfee7c08"
)

func InitCommonContract() *OverrideAccounts {
	indexDaiBalanceOf := getIndexBalanceOf(MyWallet.String(), DAIBalanceOfSlot)
	fmt.Println("indexDaiBalanceOf", indexDaiBalanceOf)

	indexDaiAllowance := getIndexAllowance(MyWallet.String(), SimSwapAddress.String(), DAIAllowanceSlot)
	fmt.Println("indexDaiAllowance", indexDaiAllowance)

	indexKncAllowance := getIndexAllowance(MyWallet.String(), SimSwapAddress.String(), KNCAllowanceSlot)
	fmt.Println("indexKncAllowance", indexKncAllowance)

	indexKncBalance := getIndexBalanceOf(MyWallet.String(), KNCBalanceSlot)
	fmt.Println("indexKncBalance", indexKncBalance)

	indexDaiSimBalance := getIndexBalanceOf(SimSwapAddress.String(), DAIBalanceOfSlot)
	fmt.Println("indexDaiSimBalance", indexDaiSimBalance)

	indexDaiSimAllowance := getIndexAllowance(SimSwapAddress.String(), Router.String(), DAIAllowanceSlot)
	fmt.Println("indexDaiSimAllowance", indexDaiSimAllowance)

	fakeBalance := "0x" + toHashString("0xD3C21BCECCEDA1000000")
	fmt.Println("fakeBalance", fakeBalance)

	fakeAllowance := "0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"
	fmt.Println("fakeAllowance", fakeAllowance)

	return &OverrideAccounts{
		SimSwapAddress: {
			Nonce: "0x11",
			Code:  "0x6080604052600436106100295760003560e01c80637e5465ba1461002e57806396d274201461006b575b600080fd5b34801561003a57600080fd5b50610055600480360381019061005091906106c1565b61009d565b6040516100629190610a02565b60405180910390f35b610085600480360381019061008091906106fd565b61015c565b60405161009493929190610a1d565b60405180910390f35b6000808390508073ffffffffffffffffffffffffffffffffffffffff1663095ea7b3847f80000000000000000000000000000000000000000000000000000000000000006040518363ffffffff1660e01b81526004016100fe929190610977565b602060405180830381600087803b15801561011857600080fd5b505af115801561012c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610150919061077d565b50600091505092915050565b60008060606000889050600088905060008273ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b81526004016101a6919061095c565b60206040518083038186803b1580156101be57600080fd5b505afa1580156101d2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f691906107a6565b905060008273ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b8152600401610233919061095c565b60206040518083038186803b15801561024b57600080fd5b505afa15801561025f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061028391906107a6565b90506102d38a8a8a8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505061041c565b945060008473ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b8152600401610310919061095c565b60206040518083038186803b15801561032857600080fd5b505afa15801561033c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061036091906107a6565b905060008473ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b815260040161039d919061095c565b60206040518083038186803b1580156103b557600080fd5b505afa1580156103c9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103ed91906107a6565b905081846103fb9190610a9e565b985082816104099190610a9e565b9750505050505050955095509592505050565b606061045e83836040518060400160405280601e81526020017f416464726573733a206c6f772d6c6576656c2063616c6c206661696c65640000815250610466565b905092915050565b6060610475848460008561047e565b90509392505050565b6060824710156104c3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104ba906109c2565b60405180910390fd5b6104cc85610592565b61050b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610502906109e2565b60405180910390fd5b6000808673ffffffffffffffffffffffffffffffffffffffff1685876040516105349190610945565b60006040518083038185875af1925050503d8060008114610571576040519150601f19603f3d011682016040523d82523d6000602084013e610576565b606091505b50915091506105868282866105d1565b92505050949350505050565b6000808273ffffffffffffffffffffffffffffffffffffffff16803b806020016040519081016040528181526000908060200190933c51119050919050565b606083156105e157829050610631565b6000835111156105f45782518084602001fd5b816040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161062891906109a0565b60405180910390fd5b9392505050565b60008135905061064781610b9f565b92915050565b60008151905061065c81610bb6565b92915050565b60008083601f84011261067457600080fd5b8235905067ffffffffffffffff81111561068d57600080fd5b6020830191508360018202830111156106a557600080fd5b9250929050565b6000815190506106bb81610bcd565b92915050565b600080604083850312156106d457600080fd5b60006106e285828601610638565b92505060206106f385828601610638565b9150509250929050565b60008060008060006080868803121561071557600080fd5b600061072388828901610638565b955050602061073488828901610638565b945050604061074588828901610638565b935050606086013567ffffffffffffffff81111561076257600080fd5b61076e88828901610662565b92509250509295509295909350565b60006020828403121561078f57600080fd5b600061079d8482850161064d565b91505092915050565b6000602082840312156107b857600080fd5b60006107c6848285016106ac565b91505092915050565b6107d881610ad2565b82525050565b60006107e982610a5b565b6107f38185610a71565b9350610803818560208601610b2c565b61080c81610b8e565b840191505092915050565b600061082282610a5b565b61082c8185610a82565b935061083c818560208601610b2c565b80840191505092915050565b61085181610b1a565b82525050565b600061086282610a66565b61086c8185610a8d565b935061087c818560208601610b2c565b61088581610b8e565b840191505092915050565b600061089d602683610a8d565b91507f416464726573733a20696e73756666696369656e742062616c616e636520666f60008301527f722063616c6c00000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000610903601d83610a8d565b91507f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006000830152602082019050919050565b61093f81610b10565b82525050565b60006109518284610817565b915081905092915050565b600060208201905061097160008301846107cf565b92915050565b600060408201905061098c60008301856107cf565b6109996020830184610848565b9392505050565b600060208201905081810360008301526109ba8184610857565b905092915050565b600060208201905081810360008301526109db81610890565b9050919050565b600060208201905081810360008301526109fb816108f6565b9050919050565b6000602082019050610a176000830184610936565b92915050565b6000606082019050610a326000830186610936565b610a3f6020830185610936565b8181036040830152610a5181846107de565b9050949350505050565b600081519050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b6000610aa982610b10565b9150610ab483610b10565b925082821015610ac757610ac6610b5f565b5b828203905092915050565b6000610add82610af0565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6000610b2582610b10565b9050919050565b60005b83811015610b4a578082015181840152602081019050610b2f565b83811115610b59576000848401525b50505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000601f19601f8301169050919050565b610ba881610ad2565b8114610bb357600080fd5b50565b610bbf81610ae4565b8114610bca57600080fd5b50565b610bd681610b10565b8114610be157600080fd5b5056fea2646970667358221220f95073ff71de9275864e88eb10b4e49402acb3adce63a27dcebb090b951269a264736f6c63430008000033",
		},
		//Router: {
		//	Nonce: "0x10",
		//	Code:  "0x6080604052600436106101395760003560e01c80638da5cb5b116100ab578063bc80f1a81161006f578063bc80f1a81461049f578063d0a3b665146104cf578063d6a92a5d14610500578063e449022e1461053d578063f2fde38b1461056d578063fa461e3314610596576101af565b80638da5cb5b146103a65780639994dd15146103d1578063a1251d7514610401578063b04311821461043e578063baba58551461046e576101af565b806356f16124116100fd57806356f16124146102b5578063715018a6146102f257806378e3214f146103095780637c02520014610332578063825caba11461036657806383197ef01461038f576101af565b806306bf53d0146101b45780632521b930146101df5780632e95b6c81461021c5780633644e5151461024c5780634cc4a27b14610277576101af565b366101af573273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614156101ad576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101a4906162ed565b60405180910390fd5b005b600080fd5b3480156101c057600080fd5b506101c96105bf565b6040516101d69190615f41565b60405180910390f35b3480156101eb57600080fd5b506102066004803603810190610201919061476e565b6105e3565b60405161021391906165ad565b60405180910390f35b61023660048036038101906102319190614a8b565b61060b565b60405161024391906165ad565b60405180910390f35b34801561025857600080fd5b50610261610b7b565b60405161026e9190615f41565b60405180910390f35b34801561028357600080fd5b5061029e60048036038101906102999190614d7c565b610b8a565b6040516102ac9291906165c8565b60405180910390f35b3480156102c157600080fd5b506102dc60048036038101906102d791906148b1565b610bbb565b6040516102e991906165ad565b60405180910390f35b3480156102fe57600080fd5b50610307610c16565b005b34801561031557600080fd5b50610330600480360381019061032b9190614a4f565b610d50565b005b61034c6004803603810190610347919061493f565b610dfb565b60405161035d9594939291906165f1565b60405180910390f35b34801561037257600080fd5b5061038d60048036038101906103889190614e44565b611205565b005b34801561039b57600080fd5b506103a4611212565b005b3480156103b257600080fd5b506103bb6112a7565b6040516103c89190615e0c565b60405180910390f35b6103eb60048036038101906103e69190614650565b6112d0565b6040516103f891906165ad565b60405180910390f35b34801561040d57600080fd5b5061042860048036038101906104239190614b0b565b611ba3565b60405161043591906165ad565b60405180910390f35b610458600480360381019061045391906149ec565b611bca565b60405161046591906165ad565b60405180910390f35b61048860048036038101906104839190614ce6565b611be3565b6040516104969291906165c8565b60405180910390f35b6104b960048036038101906104b49190614831565b6123e9565b6040516104c691906165ad565b60405180910390f35b6104e960048036038101906104e49190614c63565b6127b2565b6040516104f79291906165c8565b60405180910390f35b34801561050c57600080fd5b50610527600480360381019061052291906146c7565b6127d1565b60405161053491906165ad565b60405180910390f35b61055760048036038101906105529190614e96565b6127f8565b60405161056491906165ad565b60405180910390f35b34801561057957600080fd5b50610594600480360381019061058f91906145fe565b612811565b005b3480156105a257600080fd5b506105bd60048036038101906105b89190614bf7565b6129ba565b005b7f74ab4f0cde46aaf927859983f7d04002116dd057d4c4941f6dbfb775c3e31f4581565b60006105f0888484612cab565b6105fd89888888886123e9565b905098975050505050505050565b6000610785565b3d6000803e3d6000fd5b7f08c379a0000000000000000000000000000000000000000000000000000000006000527c200000000000000000000000000000000000000000000000000000000060205280604052816000fd5b60007f0902f1ac000000000000000000000000000000000000000000000000000000008252604082600484875afa6106a5576106a4610612565b5b60603d146106d6576106d560597c1472657365727665732063616c6c206661696c6564000000000000000061061c565b5b8151602083015186156106ec5781819250809150505b8785029250633b9aca00820283018184020492507f022c0d9f000000000000000000000000000000000000000000000000000000008452866000811461073e578360048601526000602486015261074c565b600060048601528360248601525b50886044850152608060648501526000608485015260008060a48660008a5af161077957610778610612565b5b50509695505050505050565b60405160c0810160405260046064350180356020820191508060200282019050813589600081146108475734156107df576107de60557c11696e76616c6964206d73672e76616c7565000000000000000000000061061c565b5b7f23b872dd00000000000000000000000000000000000000000000000000000000855233600486015273ffffffffffffffffffffffffffffffffffffffff8216602486015289604486015260008060648760008f5af161084257610841610612565b5b610937565b348a146108775761087660557c11696e76616c6964206d73672e76616c7565000000000000000000000061061c565b5b7fd0e30db00000000000000000000000000000000000000000000000000000000085526000806004878d73c02aaa39b223fe8d0a0e5c4f27ead9083c756cc25af16108c5576108c4610612565b5b7fa9059cbb00000000000000000000000000000000000000000000000000000000855273ffffffffffffffffffffffffffffffffffffffff82166004860152896024860152600080604487600073c02aaa39b223fe8d0a0e5c4f27ead9083c756cc25af161093657610935610612565b5b5b50889450602083015b828110156109d45780356109c373ffffffffffffffffffffffffffffffffffffffff821677ffffffff0000000000000000000000000000000000000000851660a01c7f8000000000000000000000000000000000000000000000000000000000000000861673ffffffffffffffffffffffffffffffffffffffff87168b8b61066a565b965080925050602081019050610940565b507f4000000000000000000000000000000000000000000000000000000000000000811660008114610ad657610a633077ffffffff0000000000000000000000000000000000000000841660a01c7f8000000000000000000000000000000000000000000000000000000000000000851673ffffffffffffffffffffffffffffffffffffffff86168a8a61066a565b95507f2e1a7d4d000000000000000000000000000000000000000000000000000000008552856004860152600080602487600073c02aaa39b223fe8d0a0e5c4f27ead9083c756cc25af1610aba57610ab9610612565b5b60008060008089335af1610ad157610ad0610612565b5b610b3c565b610b393377ffffffff0000000000000000000000000000000000000000841660a01c7f8000000000000000000000000000000000000000000000000000000000000000851673ffffffffffffffffffffffffffffffffffffffff86168a8a61066a565b95505b5087851015610b6e57610b6d605a7c164d696e2072657475726e206e6f74207265616368656400000000000061061c565b5b5050505095945050505050565b6000610b85612ed6565b905090565b600080610b9c8a604001518585612cab565b610baa8a8a8a8a8a8a611be3565b915091509850989650505050505050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002054905092915050565b610c1e612fa0565b73ffffffffffffffffffffffffffffffffffffffff16610c3c6112a7565b73ffffffffffffffffffffffffffffffffffffffff1614610c92576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c899061640d565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a360008060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b610d58612fa0565b73ffffffffffffffffffffffffffffffffffffffff16610d766112a7565b73ffffffffffffffffffffffffffffffffffffffff1614610dcc576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc39061640d565b60405180910390fd5b610df733828473ffffffffffffffffffffffffffffffffffffffff16612fa89092919063ffffffff16565b5050565b6000806000806000808860a0013511610e49576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e40906163cd565b60405180910390fd5b60008787905011610e8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e869061658d565b60405180910390fd5b60008860c0013590506000896000016020810190610ead91906149c3565b905060008a6020016020810190610ec491906149c3565b90506000610ee78373ffffffffffffffffffffffffffffffffffffffff1661303d565b905060006002851614610f4c5780610f00576000610f06565b8b608001355b3411610f47576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f3e9061630d565b60405180910390fd5b610fa0565b80610f58576000610f5e565b8b608001355b3414610f9f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f969061630d565b60405180910390fd5b5b8061100257610fbe838d8060e00190610fb99190616644565b612cab565b611001338d6040016020810190610fd59190614627565b8e608001358673ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b5b6000632636f7f860e01b600060a01b338e8e604051602001611028959493929190615c6a565b60405160208183030381529060405290506000808f73ffffffffffffffffffffffffffffffffffffffff1634846040516110629190615ce0565b60006040518083038185875af1925050503d806000811461109f576040519150601f19603f3d011682016040523d82523d6000602084013e6110a4565b606091505b509150915081611129576110ed816040518060400160405280601281526020017f63616c6c4279746573206661696c65643a200000000000000000000000000000815250613148565b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611120919061616b565b60405180910390fd5b5050508b60800135975061115c308373ffffffffffffffffffffffffffffffffffffffff1661333d90919063ffffffff16565b809750819a50505060008073ffffffffffffffffffffffffffffffffffffffff168d60600160208101906111909190614627565b73ffffffffffffffffffffffffffffffffffffffff16146111c3578c60600160208101906111be9190614627565b6111c5565b335b90506111f2818b8573ffffffffffffffffffffffffffffffffffffffff16612fa89092919063ffffffff16565b5a97505050505050945094509450945094565b61120f3382613406565b50565b61121a612fa0565b73ffffffffffffffffffffffffffffffffffffffff166112386112a7565b73ffffffffffffffffffffffffffffffffffffffff161461128e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112859061640d565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff16ff5b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000807f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff1614156114ae576000341461136a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611361906161ed565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166323b872dd3330876040518463ffffffff1660e01b81526004016113c793929190615e27565b602060405180830381600087803b1580156113e157600080fd5b505af11580156113f5573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061141991906148ed565b507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d856040518263ffffffff1660e01b815260040161147391906165ad565b600060405180830381600087803b15801561148d57600080fd5b505af11580156114a1573d6000803e3d6000fd5b50505050600190506115c0565b600073ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff16141561152e57833414611525576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161151c906161ad565b60405180910390fd5b600190506115bf565b60003414611571576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611568906161ed565b60405180910390fd5b6115be337f0000000000000000000000000000000000000000000000000000000000000000868973ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b5b5b801561171a577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166108fc859081150290604051600060405180830381858888f1935050505015801561162c573d6000803e3d6000fd5b507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663b52e84588689866040518060400160405280600581526020017f31494e43480000000000000000000000000000000000000000000000000000008152506040518563ffffffff1660e01b81526004016116c194939291906160c5565b602060405180830381600087803b1580156116db57600080fd5b505af11580156116ef573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117139190614e6d565b9150611b99565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16141561198a577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166369be90ec8730866040518060400160405280600581526020017f31494e43480000000000000000000000000000000000000000000000000000008152506040518563ffffffff1660e01b81526004016118029493929190616079565b602060405180830381600087803b15801561181c57600080fd5b505af1158015611830573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118549190614e6d565b91507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db0836040518263ffffffff1660e01b81526004016000604051808303818588803b1580156118be57600080fd5b505af11580156118d2573d6000803e3d6000fd5b50505050507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb88846040518363ffffffff1660e01b8152600401611932929190615e5e565b602060405180830381600087803b15801561194c57600080fd5b505af1158015611960573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061198491906148ed565b50611b98565b600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161415611aac577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166369be90ec8789866040518060400160405280600581526020017f31494e43480000000000000000000000000000000000000000000000000000008152506040518563ffffffff1660e01b8152600401611a539493929190616079565b602060405180830381600087803b158015611a6d57600080fd5b505af1158015611a81573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611aa59190614e6d565b9150611b97565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166365d02b0487878a876040518060400160405280600581526020017f31494e43480000000000000000000000000000000000000000000000000000008152506040518663ffffffff1660e01b8152600401611b42959493929190616111565b602060405180830381600087803b158015611b5c57600080fd5b505af1158015611b70573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b949190614e6d565b91505b5b5b5095945050505050565b6000611bb0888484612cab565b611bbd888888888861060b565b9050979650505050505050565b6000611bd933868686866112d0565b9050949350505050565b6000806000886060015190506000807f80000000000000000000000000000000000000000000000000000000000000008b600001511611905060017f8000000000000000000000000000000000000000000000000000000000000000038a60000151168a600001818152505060008a60000151905060006040826fffffffffffffffffffffffffffffffff16901c6fffffffffffffffffffffffffffffffff1690506000811480611c945750804211155b611cd3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611cca9061626d565b60405180910390fd5b611cdd8483613406565b505060008a60a00151905060008b60c001519050600088148015611d015750600089145b15611d1157819850809750611e53565b6000881415611d9e5781891115611d5d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d549061620d565b60405180910390fd5b611d9782611d8960018503611d7b8d866134ef90919063ffffffff16565b61355f90919063ffffffff16565b6135b490919063ffffffff16565b9750611e52565b6000891415611e165780881115611dea576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611de1906161cd565b60405180910390fd5b611e0f81611e018a856134ef90919063ffffffff16565b6135b490919063ffffffff16565b9850611e51565b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611e489061650d565b60405180910390fd5b5b5b5050600087118015611e655750600086115b611ea4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611e9b906164cd565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168a6080015173ffffffffffffffffffffffffffffffffffffffff161480611f1257503373ffffffffffffffffffffffffffffffffffffffff168a6080015173ffffffffffffffffffffffffffffffffffffffff16145b611f51576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f489061646d565b60405180910390fd5b6000611fa47f74ab4f0cde46aaf927859983f7d04002116dd057d4c4941f6dbfb775c3e31f458c604051602001611f89929190615fe1565b6040516020818303038152906040528051906020012061360a565b9050611fb283828c8c613643565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff168b6020015173ffffffffffffffffffffffffffffffffffffffff1614801561200e5750815b1561211b5761204483308a8e6020015173ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d896040518263ffffffff1660e01b815260040161209d91906165ad565b600060405180830381600087803b1580156120b757600080fd5b505af11580156120cb573d6000803e3d6000fd5b505050508573ffffffffffffffffffffffffffffffffffffffff166108fc899081150290604051600060405180830381858888f19350505050158015612115573d6000803e3d6000fd5b5061214d565b61214c83878a8e6020015173ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff168b6040015173ffffffffffffffffffffffffffffffffffffffff161480156121ac5750600034115b15612327578634146121f3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016121ea9061622d565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db0886040518263ffffffff1660e01b81526004016000604051808303818588803b15801561225b57600080fd5b505af115801561226f573d6000803e3d6000fd5b50505050507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb84896040518363ffffffff1660e01b81526004016122cf929190615f18565b602060405180830381600087803b1580156122e957600080fd5b505af11580156122fd573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061232191906148ed565b5061239c565b6000341461236a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016123619061622d565b60405180910390fd5b61239b3384898e6040015173ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b5b7fc3b639f02b125bfa160e50739b8c44eb2d1b6908e2b6d5925c6d770f2ca7812781896040516123cd92919061600b565b60405180910390a1878794509450505050965096945050505050565b60008083839050905060008111612435576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161242c9061618d565b60405180910390fd5b60006001820390508692506000807f40000000000000000000000000000000000000000000000000000000000000008787600081811061247157fe5b90506020020135161190506000807f20000000000000000000000000000000000000000000000000000000000000008888868181106124ac57fe5b90506020020135161190508115612585578834146124ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016124f69061652d565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db08a6040518263ffffffff1660e01b81526004016000604051808303818588803b15801561256757600080fd5b505af115801561257b573d6000803e3d6000fd5b50505050506125c9565b600034146125c8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016125bf9061624d565b60405180910390fd5b5b600184111561266d576125fd30836125e157336125e3565b305b898960008181106125f057fe5b9050602002013588613862565b94506000600190505b8381101561263b5761262c30308a8a8581811061261f57fe5b9050602002013589613862565b95508080600101915050612606565b506126668161264a578a61264c565b305b3089898781811061265957fe5b9050602002013588613862565b94506126a7565b6126a48161267b578a61267d565b305b83612688573361268a565b305b8989600081811061269757fe5b9050602002013588613862565b94505b878510156126ea576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016126e19061656d565b60405180910390fd5b80156127a5577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d866040518263ffffffff1660e01b815260040161274991906165ad565b600060405180830381600087803b15801561276357600080fd5b505af1158015612777573d6000803e3d6000fd5b505050506127a4858b73ffffffffffffffffffffffffffffffffffffffff16613a5690919063ffffffff16565b5b5050505095945050505050565b6000806127c3878787878733611be3565b915091509550959350505050565b60006127de878484612cab565b6127eb88888888886112d0565b9050979650505050505050565b600061280733868686866123e9565b9050949350505050565b612819612fa0565b73ffffffffffffffffffffffffffffffffffffffff166128376112a7565b73ffffffffffffffffffffffffffffffffffffffff161461288d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016128849061640d565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156128fd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016128f49061628d565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a3806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60008060007fff1f98431c8ad98523631ae4a59f267346ea31f984000000000000000000000060001b905060007fe34f199b19b2b4f47f68442619d555527d244f78a3297ea89325f843f87b8b5460001b90506000612a6c565b3d6000803e3d6000fd5b7f08c379a0000000000000000000000000000000000000000000000000000000006000527c200000000000000000000000000000000000000000000000000000000060205280604052816000fd5b604051602081017f0dfe1681d21220a7ddca3f4300000000000000000000000000000000000000008252602081600484335afa612aac57612aab612a14565b5b805196506020816004808501335afa612ac857612ac7612a14565b5b80519550602081600460088501335afa612ae557612ae4612a14565b5b80518286815260158101905088815287602082015281604082015260608120815260208101905085815273ffffffffffffffffffffffffffffffffffffffff6055852016338114612b5957612b5860547c10554e495633523a2062616420706f6f6c000000000000000000000000612a1e565b5b6020608486378451955050505050506000891315612c04573073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415612bd557612bd0338a8773ffffffffffffffffffffffffffffffffffffffff16613b4a9092919063ffffffff16565b612c03565b612c0281338b8873ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b5b5b6000881315612ca0573073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415612c7157612c6c33898673ffffffffffffffffffffffffffffffffffffffff16613b4a9092919063ffffffff16565b612c9f565b612c9e81338a8773ffffffffffffffffffffffffffffffffffffffff166130bf909392919063ffffffff16565b5b5b505050505050505050565b6000828290501115612ed1576000606060e0848490501415612d66578473ffffffffffffffffffffffffffffffffffffffff1663d505accf60e01b8585604051602001612cfa93929190615cb6565b604051602081830303815290604052604051612d169190615ce0565b6000604051808303816000865af19150503d8060008114612d53576040519150601f19603f3d011682016040523d82523d6000602084013e612d58565b606091505b508092508193505050612e4e565b610100848490501415612e12578473ffffffffffffffffffffffffffffffffffffffff16638fcbaf0c60e01b8585604051602001612da693929190615cb6565b604051602081830303815290604052604051612dc29190615ce0565b6000604051808303816000865af19150503d8060008114612dff576040519150601f19603f3d011682016040523d82523d6000602084013e612e04565b606091505b508092508193505050612e4d565b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612e449061642d565b60405180910390fd5b5b81612ece57612e92816040518060400160405280600f81526020017f5065726d6974206661696c65643a200000000000000000000000000000000000815250613148565b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612ec5919061616b565b60405180910390fd5b50505b505050565b60007f0000000000000000000000000000000000000000000000000000000000000000612f01613bd0565b1415612f2f577f00000000000000000000000000000000000000000000000000000000000000009050612f9d565b612f9a7f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f0000000000000000000000000000000000000000000000000000000000000000613bd8565b90505b90565b600033905090565b600081111561303857612fba8361303d565b1561300b578173ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015613005573d6000803e3d6000fd5b50613037565b61303682828573ffffffffffffffffffffffffffffffffffffffff16613b4a9092919063ffffffff16565b5b5b505050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614806130b8575073eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16145b9050919050565b613142846323b872dd60e01b8585856040516024016130e093929190615e87565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050613c19565b50505050565b6060600483511061330a576000602084015190507f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161480156131cb57506044845110155b156132595760006060602486015191508160240186019050805182602401018651101561322d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016132249061644d565b60405180910390fd5b8481604051602001613240929190615d6b565b6040516020818303038152906040529350505050613337565b7f4e487b71539e0164c9d29506cc725e49342bcac15e0927282bf30fedfe1c72687bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161480156132c7575060248451145b1561330857600060248501519050836132df82613ce0565b6040516020016132f0929190615cf7565b60405160208183030381529060405292505050613337565b505b8161331484613d11565b604051602001613325929190615d31565b60405160208183030381529060405290505b92915050565b6000806133498461303d565b15613370578273ffffffffffffffffffffffffffffffffffffffff163183915091506133ff565b8373ffffffffffffffffffffffffffffffffffffffff166370a08231846040518263ffffffff1660e01b81526004016133a99190615e0c565b60206040518083038186803b1580156133c157600080fd5b505afa1580156133d5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133f99190614e6d565b83915091505b9250929050565b600060088267ffffffffffffffff16901c67ffffffffffffffff16905060008260ff166001901b90506000600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905060008160008581526020019081526020016000205490506000838216146134ce576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016134c5906164ad565b60405180910390fd5b82811782600086815260200190815260200160002081905550505050505050565b6000808314156135025760009050613559565b600082840290508284828161351357fe5b0414613554576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161354b906163ed565b60405180910390fd5b809150505b92915050565b6000808284019050838110156135aa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016135a1906162ad565b60405180910390fd5b8091505092915050565b60008082116135f8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016135ef9061638d565b60405180910390fd5b81838161360157fe5b04905092915050565b6000613614612ed6565b82604051602001613626929190615da5565b604051602081830303815290604052805190602001209050919050565b8373ffffffffffffffffffffffffffffffffffffffff166136a88484848080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050613f65565b73ffffffffffffffffffffffffffffffffffffffff161461385c576000808573ffffffffffffffffffffffffffffffffffffffff16631626ba7e60e01b8686866040516024016136fa93929190615faf565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506040516137649190615ce0565b600060405180830381855afa9150503d806000811461379f576040519150601f19603f3d011682016040523d82523d6000602084013e6137a4565b606091505b50915091508180156137b7575060208151145b801561381a5750631626ba7e60e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916818060200190518101906137f99190614916565b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b613859576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613850906162cd565b60405180910390fd5b50505b50505050565b60008060007f80000000000000000000000000000000000000000000000000000000000000008516149050801561396b5760008473ffffffffffffffffffffffffffffffffffffffff1663128acb0888846138bc88613fde565b6401000276a48b6040516020016138d39190615e0c565b6040516020818303038152906040526040518663ffffffff1660e01b8152600401613902959493929190615ebe565b6040805180830381600087803b15801561391b57600080fd5b505af115801561392f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906139539190614bbb565b9150506139628160000361404a565b92505050613a4e565b60008473ffffffffffffffffffffffffffffffffffffffff1663128acb08888461399488613fde565b73fffd8963efd1fc6a506488495d951d5263988d258b6040516020016139ba9190615e0c565b6040516020818303038152906040526040518663ffffffff1660e01b81526004016139e9959493929190615ebe565b6040805180830381600087803b158015613a0257600080fd5b505af1158015613a16573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613a3a9190614bbb565b509050613a498160000361404a565b925050505b949350505050565b80471015613a99576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613a909061634d565b60405180910390fd5b60008273ffffffffffffffffffffffffffffffffffffffff1682604051613abf90615ddc565b60006040518083038185875af1925050503d8060008114613afc576040519150601f19603f3d011682016040523d82523d6000602084013e613b01565b606091505b5050905080613b45576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613b3c9061632d565b60405180910390fd5b505050565b613bcb8363a9059cbb60e01b8484604051602401613b69929190615f18565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050613c19565b505050565b600046905090565b6000838383613be5613bd0565b30604051602001613bfa959493929190615f5c565b6040516020818303038152906040528051906020012090509392505050565b6000613c7b826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c65648152508573ffffffffffffffffffffffffffffffffffffffff166140979092919063ffffffff16565b9050600081511115613cdb5780806020019051810190613c9b91906148ed565b613cda576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613cd19061654d565b60405180910390fd5b5b505050565b6060613d0a82604051602001613cf69190615df1565b604051602081830303815290604052613d11565b9050919050565b606060006f3031323334353637383961626364656660801b90506000600284510260020167ffffffffffffffff81118015613d4b57600080fd5b506040519080825280601f01601f191660200182016040528015613d7e5781602001600182028036833780820191505090505b5090507f300000000000000000000000000000000000000000000000000000000000000081600081518110613daf57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f780000000000000000000000000000000000000000000000000000000000000081600181518110613e0c57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060005b8451811015613f5a57826004868381518110613e5657fe5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c60f81c60ff1660108110613e9557fe5b1a60f81b826002836002020181518110613eab57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535082600f60f81b868381518110613eec57fe5b602001015160f81c60f81b1660f81c60ff1660108110613f0857fe5b1a60f81b826003836002020181518110613f1e57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508080600101915050613e3e565b508092505050919050565b6000604182511415613fa45760008060006020850151925060408501519150606085015160001a9050613f9a868285856140af565b9350505050613fd8565b604082511415613fd3576000806020840151915060408401519050613fca8583836141aa565b92505050613fd8565b600090505b92915050565b60007f80000000000000000000000000000000000000000000000000000000000000008210614042576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401614039906164ed565b60405180910390fd5b819050919050565b60008082121561408f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401614086906163ad565b60405180910390fd5b819050919050565b60606140a684846000856141f4565b90509392505050565b60007f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08260001c11156140e557600090506141a2565b601b8460ff16141580156140fd5750601c8460ff1614155b1561410b57600090506141a2565b6000600186868686604051600081526020016040526040516141309493929190616034565b6020604051602081039080840390855afa158015614152573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141561419d5760009150506141a2565b809150505b949350505050565b60008060007f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff84169150601b8460ff1c0190506141e9868287856140af565b925050509392505050565b606082471015614239576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016142309061636d565b60405180910390fd5b61424285614308565b614281576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016142789061648d565b60405180910390fd5b6000808673ffffffffffffffffffffffffffffffffffffffff1685876040516142aa9190615ce0565b60006040518083038185875af1925050503d80600081146142e7576040519150601f19603f3d011682016040523d82523d6000602084013e6142ec565b606091505b50915091506142fc82828661431b565b92505050949350505050565b600080823b905060008111915050919050565b6060831561432b5782905061437b565b60008351111561433e5782518084602001fd5b816040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401614372919061616b565b60405180910390fd5b9392505050565b60008135905061439181616919565b92915050565b6000813590506143a681616930565b92915050565b60008083601f8401126143be57600080fd5b8235905067ffffffffffffffff8111156143d757600080fd5b6020830191508360208202830111156143ef57600080fd5b9250929050565b60008083601f84011261440857600080fd5b8235905067ffffffffffffffff81111561442157600080fd5b60208301915083602082028301111561443957600080fd5b9250929050565b60008151905061444f81616947565b92915050565b6000815190506144648161695e565b92915050565b60008083601f84011261447c57600080fd5b8235905067ffffffffffffffff81111561449557600080fd5b6020830191508360018202830111156144ad57600080fd5b9250929050565b6000813590506144c381616975565b92915050565b6000813590506144d88161698c565b92915050565b6000813590506144ed816169a3565b92915050565b600081519050614502816169a3565b92915050565b600060e0828403121561451a57600080fd5b61452460e061669b565b90506000614534848285016145d4565b6000830152506020614548848285016144c9565b602083015250604061455c848285016144c9565b604083015250606061457084828501614382565b606083015250608061458484828501614382565b60808301525060a0614598848285016145d4565b60a08301525060c06145ac848285016145d4565b60c08301525092915050565b600061010082840312156145cb57600080fd5b81905092915050565b6000813590506145e3816169ba565b92915050565b6000815190506145f8816169ba565b92915050565b60006020828403121561461057600080fd5b600061461e84828501614382565b91505092915050565b60006020828403121561463957600080fd5b600061464784828501614397565b91505092915050565b600080600080600060a0868803121561466857600080fd5b600061467688828901614397565b9550506020614687888289016144c9565b9450506040614698888289016144c9565b93505060606146a9888289016145d4565b92505060806146ba888289016145d4565b9150509295509295909350565b600080600080600080600060c0888a0312156146e257600080fd5b60006146f08a828b01614397565b97505060206147018a828b016144c9565b96505060406147128a828b016144c9565b95505060606147238a828b016145d4565b94505060806147348a828b016145d4565b93505060a088013567ffffffffffffffff81111561475157600080fd5b61475d8a828b0161446a565b925092505092959891949750929550565b60008060008060008060008060c0898b03121561478a57600080fd5b60006147988b828c01614397565b98505060206147a98b828c016144c9565b97505060406147ba8b828c016145d4565b96505060606147cb8b828c016145d4565b955050608089013567ffffffffffffffff8111156147e857600080fd5b6147f48b828c016143f6565b945094505060a089013567ffffffffffffffff81111561481357600080fd5b61481f8b828c0161446a565b92509250509295985092959890939650565b60008060008060006080868803121561484957600080fd5b600061485788828901614397565b9550506020614868888289016145d4565b9450506040614879888289016145d4565b935050606086013567ffffffffffffffff81111561489657600080fd5b6148a2888289016143f6565b92509250509295509295909350565b600080604083850312156148c457600080fd5b60006148d285828601614382565b92505060206148e3858286016145d4565b9150509250929050565b6000602082840312156148ff57600080fd5b600061490d84828501614440565b91505092915050565b60006020828403121561492857600080fd5b600061493684828501614455565b91505092915050565b6000806000806060858703121561495557600080fd5b6000614963878288016144b4565b945050602085013567ffffffffffffffff81111561498057600080fd5b61498c878288016145b8565b935050604085013567ffffffffffffffff8111156149a957600080fd5b6149b58782880161446a565b925092505092959194509250565b6000602082840312156149d557600080fd5b60006149e3848285016144c9565b91505092915050565b60008060008060808587031215614a0257600080fd5b6000614a10878288016144c9565b9450506020614a21878288016144c9565b9350506040614a32878288016145d4565b9250506060614a43878288016145d4565b91505092959194509250565b60008060408385031215614a6257600080fd5b6000614a70858286016144c9565b9250506020614a81858286016145d4565b9150509250929050565b600080600080600060808688031215614aa357600080fd5b6000614ab1888289016144c9565b9550506020614ac2888289016145d4565b9450506040614ad3888289016145d4565b935050606086013567ffffffffffffffff811115614af057600080fd5b614afc888289016143ac565b92509250509295509295909350565b600080600080600080600060a0888a031215614b2657600080fd5b6000614b348a828b016144c9565b9750506020614b458a828b016145d4565b9650506040614b568a828b016145d4565b955050606088013567ffffffffffffffff811115614b7357600080fd5b614b7f8a828b016143ac565b9450945050608088013567ffffffffffffffff811115614b9e57600080fd5b614baa8a828b0161446a565b925092505092959891949750929550565b60008060408385031215614bce57600080fd5b6000614bdc858286016144f3565b9250506020614bed858286016144f3565b9150509250929050565b60008060008060608587031215614c0d57600080fd5b6000614c1b878288016144de565b9450506020614c2c878288016144de565b935050604085013567ffffffffffffffff811115614c4957600080fd5b614c558782880161446a565b925092505092959194509250565b60008060008060006101408688031215614c7c57600080fd5b6000614c8a88828901614508565b95505060e086013567ffffffffffffffff811115614ca757600080fd5b614cb38882890161446a565b9450945050610100614cc7888289016145d4565b925050610120614cd9888289016145d4565b9150509295509295909350565b6000806000806000806101608789031215614d0057600080fd5b6000614d0e89828a01614508565b96505060e087013567ffffffffffffffff811115614d2b57600080fd5b614d3789828a0161446a565b9550955050610100614d4b89828a016145d4565b935050610120614d5d89828a016145d4565b925050610140614d6f89828a01614397565b9150509295509295509295565b600080600080600080600080610180898b031215614d9957600080fd5b6000614da78b828c01614508565b98505060e089013567ffffffffffffffff811115614dc457600080fd5b614dd08b828c0161446a565b9750975050610100614de48b828c016145d4565b955050610120614df68b828c016145d4565b945050610140614e088b828c01614397565b93505061016089013567ffffffffffffffff811115614e2657600080fd5b614e328b828c0161446a565b92509250509295985092959890939650565b600060208284031215614e5657600080fd5b6000614e64848285016145d4565b91505092915050565b600060208284031215614e7f57600080fd5b6000614e8d848285016145e9565b91505092915050565b60008060008060608587031215614eac57600080fd5b6000614eba878288016145d4565b9450506020614ecb878288016145d4565b935050604085013567ffffffffffffffff811115614ee857600080fd5b614ef4878288016143f6565b925092505092959194509250565b614f0b81616811565b82525050565b614f1a8161672c565b82525050565b614f31614f2c8261672c565b6168ad565b82525050565b614f408161671a565b82525050565b614f4f8161671a565b82525050565b614f5e8161673e565b82525050565b614f75614f708261674a565b6168bf565b82525050565b614f8481616776565b82525050565b614f9b614f9682616776565b6168c9565b82525050565b614fb2614fad82616780565b6168d3565b82525050565b6000614fc483856166e2565b9350614fd183858461686b565b614fda836168fb565b840190509392505050565b6000614ff183856166f3565b9350614ffe83858461686b565b82840190509392505050565b6000615015826166cc565b61501f81856166e2565b935061502f81856020860161687a565b615038816168fb565b840191505092915050565b600061504e826166cc565b61505881856166f3565b935061506881856020860161687a565b80840191505092915050565b61507d81616823565b82525050565b61508c81616823565b82525050565b61509b816167d0565b82525050565b60006150ac826166d7565b6150b681856166fe565b93506150c681856020860161687a565b6150cf816168fb565b840191505092915050565b60006150e5826166d7565b6150ef818561670f565b93506150ff81856020860161687a565b80840191505092915050565b60006151186013836166fe565b91507f554e495633523a20656d70747920706f6f6c73000000000000000000000000006000830152602082019050919050565b60006151586016836166fe565b91507f434c31494e3a2077726f6e67206d73672e76616c7565000000000000000000006000830152602082019050919050565b6000615198601b836166fe565b91507f4c4f503a2074616b696e6720616d6f756e7420657863656564656400000000006000830152602082019050919050565b60006151d8601c836166fe565b91507f434c31494e3a206d73672e76616c75652073686f756c642062652030000000006000830152602082019050919050565b6000615218601b836166fe565b91507f4c4f503a206d616b696e6720616d6f756e7420657863656564656400000000006000830152602082019050919050565b60006152586014836166fe565b91507f4c4f503a2077726f6e67206d73672e76616c75650000000000000000000000006000830152602082019050919050565b6000615298601d836166fe565b91507f554e495633523a206d73672e76616c75652073686f756c6420626520300000006000830152602082019050919050565b60006152d86012836166fe565b91507f4c4f503a206f72646572206578706972656400000000000000000000000000006000830152602082019050919050565b60006153186026836166fe565b91507f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008301527f64647265737300000000000000000000000000000000000000000000000000006020830152604082019050919050565b600061537e60028361670f565b91507f19010000000000000000000000000000000000000000000000000000000000006000830152600282019050919050565b60006153be601b836166fe565b91507f536166654d6174683a206164646974696f6e206f766572666c6f7700000000006000830152602082019050919050565b60006153fe6012836166fe565b91507f4c4f503a20626164207369676e617475726500000000000000000000000000006000830152602082019050919050565b600061543e6014836166fe565b91507f455448206465706f7369742072656a65637465640000000000000000000000006000830152602082019050919050565b600061547e6011836166fe565b91507f496e76616c6964206d73672e76616c75650000000000000000000000000000006000830152602082019050919050565b60006154be603a836166fe565b91507f416464726573733a20756e61626c6520746f2073656e642076616c75652c207260008301527f6563697069656e74206d617920686176652072657665727465640000000000006020830152604082019050919050565b6000615524601d836166fe565b91507f416464726573733a20696e73756666696369656e742062616c616e63650000006000830152602082019050919050565b60006155646026836166fe565b91507f416464726573733a20696e73756666696369656e742062616c616e636520666f60008301527f722063616c6c00000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006155ca60018361670f565b91507f29000000000000000000000000000000000000000000000000000000000000006000830152600182019050919050565b600061560a601a836166fe565b91507f536166654d6174683a206469766973696f6e206279207a65726f0000000000006000830152602082019050919050565b600061564a60068361670f565b91507f50616e69632800000000000000000000000000000000000000000000000000006000830152600682019050919050565b600061568a6020836166fe565b91507f53616665436173743a2076616c7565206d75737420626520706f7369746976656000830152602082019050919050565b60006156ca601a836166fe565b91507f4d696e2072657475726e2073686f756c64206e6f7420626520300000000000006000830152602082019050919050565b600061570a6021836166fe565b91507f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f60008301527f77000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b600061577060088361670f565b91507f556e6b6e6f776e280000000000000000000000000000000000000000000000006000830152600882019050919050565b60006157b06020836166fe565b91507f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726000830152602082019050919050565b60006157f06013836166fe565b91507f57726f6e67207065726d6974206c656e677468000000000000000000000000006000830152602082019050919050565b60006158306015836166fe565b91507f496e76616c69642072657665727420726561736f6e00000000000000000000006000830152602082019050919050565b60006158706012836166fe565b91507f4c4f503a2070726976617465206f7264657200000000000000000000000000006000830152602082019050919050565b60006158b06000836166f3565b9150600082019050919050565b60006158ca601d836166fe565b91507f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006000830152602082019050919050565b600061590a6016836166fe565b91507f4c4f503a20696e76616c696461746564206f72646572000000000000000000006000830152602082019050919050565b600061594a6018836166fe565b91507f4c4f503a2063616e27742073776170203020616d6f756e7400000000000000006000830152602082019050919050565b600061598a6028836166fe565b91507f53616665436173743a2076616c756520646f65736e27742066697420696e206160008301527f6e20696e743235360000000000000000000000000000000000000000000000006020830152604082019050919050565b60006159f0601f836166fe565b91507f4c4f503a206f6e65206f6620616d6f756e74732073686f756c642062652030006000830152602082019050919050565b6000615a306017836166fe565b91507f554e495633523a2077726f6e67206d73672e76616c75650000000000000000006000830152602082019050919050565b6000615a70602a836166fe565b91507f5361666545524332303a204552433230206f7065726174696f6e20646964206e60008301527f6f742073756363656564000000000000000000000000000000000000000000006020830152604082019050919050565b6000615ad66012836166fe565b91507f554e495633523a206d696e2072657475726e00000000000000000000000000006000830152602082019050919050565b6000615b1660068361670f565b91507f4572726f722800000000000000000000000000000000000000000000000000006000830152600682019050919050565b6000615b566018836166fe565b91507f646174612073686f756c64206e6f7420626520656d70747900000000000000006000830152602082019050919050565b60e082016000820151615b9f6000850182615c26565b506020820151615bb26020850182615074565b506040820151615bc56040850182615074565b506060820151615bd86060850182614f37565b506080820151615beb6080850182614f37565b5060a0820151615bfe60a0850182615c26565b5060c0820151615c1160c0850182615c26565b50505050565b615c20816167da565b82525050565b615c2f816167fa565b82525050565b615c3e816167fa565b82525050565b615c55615c50826167fa565b6168ef565b82525050565b615c6481616804565b82525050565b6000615c768288614fa1565b600482019150615c868287614f64565b600c82019150615c968286614f20565b601482019150615ca7828486614fe5565b91508190509695505050505050565b6000615cc28286614fa1565b600482019150615cd3828486614fe5565b9150819050949350505050565b6000615cec8284615043565b915081905092915050565b6000615d0382856150da565b9150615d0e8261563d565b9150615d1a82846150da565b9150615d25826155bd565b91508190509392505050565b6000615d3d82856150da565b9150615d4882615763565b9150615d5482846150da565b9150615d5f826155bd565b91508190509392505050565b6000615d7782856150da565b9150615d8282615b09565b9150615d8e8284615043565b9150615d99826155bd565b91508190509392505050565b6000615db082615371565b9150615dbc8285614f8a565b602082019150615dcc8284614f8a565b6020820191508190509392505050565b6000615de7826158a3565b9150819050919050565b6000615dfd8284615c44565b60208201915081905092915050565b6000602082019050615e216000830184614f46565b92915050565b6000606082019050615e3c6000830186614f02565b615e496020830185614f02565b615e566040830184615c35565b949350505050565b6000604082019050615e736000830185614f02565b615e806020830184615c35565b9392505050565b6000606082019050615e9c6000830186614f46565b615ea96020830185614f46565b615eb66040830184615c35565b949350505050565b600060a082019050615ed36000830188614f46565b615ee06020830187614f55565b615eed6040830186615092565b615efa6060830185615c17565b8181036080830152615f0c818461500a565b90509695505050505050565b6000604082019050615f2d6000830185614f46565b615f3a6020830184615c35565b9392505050565b6000602082019050615f566000830184614f7b565b92915050565b600060a082019050615f716000830188614f7b565b615f7e6020830187614f7b565b615f8b6040830186614f7b565b615f986060830185615c35565b615fa56080830184614f46565b9695505050505050565b6000604082019050615fc46000830186614f7b565b8181036020830152615fd7818486614fb8565b9050949350505050565b600061010082019050615ff76000830185614f7b565b6160046020830184615b89565b9392505050565b60006040820190506160206000830185614f7b565b61602d6020830184615c35565b9392505050565b60006080820190506160496000830187614f7b565b6160566020830186615c5b565b6160636040830185614f7b565b6160706060830184614f7b565b95945050505050565b600060808201905061608e6000830187615083565b61609b6020830186614f11565b6160a86040830185615c35565b81810360608301526160ba818461500a565b905095945050505050565b60006080820190506160da6000830187615083565b6160e76020830186614f02565b6160f46040830185615c35565b8181036060830152616106818461500a565b905095945050505050565b600060a0820190506161266000830188615083565b6161336020830187615083565b6161406040830186614f02565b61614d6060830185615c35565b818103608083015261615f818461500a565b90509695505050505050565b6000602082019050818103600083015261618581846150a1565b905092915050565b600060208201905081810360008301526161a68161510b565b9050919050565b600060208201905081810360008301526161c68161514b565b9050919050565b600060208201905081810360008301526161e68161518b565b9050919050565b60006020820190508181036000830152616206816151cb565b9050919050565b600060208201905081810360008301526162268161520b565b9050919050565b600060208201905081810360008301526162468161524b565b9050919050565b600060208201905081810360008301526162668161528b565b9050919050565b60006020820190508181036000830152616286816152cb565b9050919050565b600060208201905081810360008301526162a68161530b565b9050919050565b600060208201905081810360008301526162c6816153b1565b9050919050565b600060208201905081810360008301526162e6816153f1565b9050919050565b6000602082019050818103600083015261630681615431565b9050919050565b6000602082019050818103600083015261632681615471565b9050919050565b60006020820190508181036000830152616346816154b1565b9050919050565b6000602082019050818103600083015261636681615517565b9050919050565b6000602082019050818103600083015261638681615557565b9050919050565b600060208201905081810360008301526163a6816155fd565b9050919050565b600060208201905081810360008301526163c68161567d565b9050919050565b600060208201905081810360008301526163e6816156bd565b9050919050565b60006020820190508181036000830152616406816156fd565b9050919050565b60006020820190508181036000830152616426816157a3565b9050919050565b60006020820190508181036000830152616446816157e3565b9050919050565b6000602082019050818103600083015261646681615823565b9050919050565b6000602082019050818103600083015261648681615863565b9050919050565b600060208201905081810360008301526164a6816158bd565b9050919050565b600060208201905081810360008301526164c6816158fd565b9050919050565b600060208201905081810360008301526164e68161593d565b9050919050565b600060208201905081810360008301526165068161597d565b9050919050565b60006020820190508181036000830152616526816159e3565b9050919050565b6000602082019050818103600083015261654681615a23565b9050919050565b6000602082019050818103600083015261656681615a63565b9050919050565b6000602082019050818103600083015261658681615ac9565b9050919050565b600060208201905081810360008301526165a681615b49565b9050919050565b60006020820190506165c26000830184615c35565b92915050565b60006040820190506165dd6000830185615c35565b6165ea6020830184615c35565b9392505050565b600060a0820190506166066000830188615c35565b6166136020830187615c35565b6166206040830186615c35565b61662d6060830185614f46565b61663a6080830184614f46565b9695505050505050565b6000808335600160200384360303811261665d57600080fd5b80840192508235915067ffffffffffffffff82111561667b57600080fd5b60208301925060018202360383131561669357600080fd5b509250929050565b6000604051905081810181811067ffffffffffffffff821117156166c2576166c16168f9565b5b8060405250919050565b600081519050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b600081905092915050565b6000616725826167da565b9050919050565b6000616737826167da565b9050919050565b60008115159050919050565b60007fffffffffffffffffffffffff000000000000000000000000000000000000000082169050919050565b6000819050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b60006167b78261671a565b9050919050565b60006167c98261671a565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b600061681c82616847565b9050919050565b600061682e82616835565b9050919050565b6000616840826167da565b9050919050565b600061685282616859565b9050919050565b6000616864826167da565b9050919050565b82818337600083830152505050565b60005b8381101561689857808201518184015260208101905061687d565b838111156168a7576000848401525b50505050565b60006168b8826168dd565b9050919050565b6000819050919050565b6000819050919050565b6000819050919050565b60006168e88261690c565b9050919050565b6000819050919050565bfe5b6000601f19601f8301169050919050565b60008160601b9050919050565b6169228161671a565b811461692d57600080fd5b50565b6169398161672c565b811461694457600080fd5b50565b6169508161673e565b811461695b57600080fd5b50565b61696781616780565b811461697257600080fd5b50565b61697e816167ac565b811461698957600080fd5b50565b616995816167be565b81146169a057600080fd5b50565b6169ac816167d0565b81146169b757600080fd5b50565b6169c3816167fa565b81146169ce57600080fd5b5056fea2646970667358221220aae02aeb8d33cfa334d9dd739792f039b782807978cfaeaf98f6183f9d326d1b64736f6c63430007060033",
		//},
		MyWallet: {
			Balance: "0x8ac7230489e80000",
		},
		DAIContract: {
			StateDiff: map[string]string{
				indexDaiBalanceOf.String():    fakeBalance,
				indexDaiAllowance.String():    fakeAllowance,
				indexDaiSimBalance.String():   fakeBalance,
				indexDaiSimAllowance.String(): fakeAllowance,
			},
		},
		KNCContract: {
			StateDiff: map[string]string{
				indexKncAllowance.String(): fakeAllowance,
				indexKncBalance.String():   fakeBalance,
			},
		},
	}
}

func main() {
	startTime := time.Now()

	commonContract := InitCommonContract()
	// https://etherscan.io/tx/0x606e8c8084855d3fb20cb1c69f520d0a1feae6c35a9d3659a9cda8a1cf53e9e2#eventlog
	//rawurl := "https://proxy.kyberengineering.io/ethereum" // "http://localhost:8545/" //  "https://mainnet.infura.io/v3/3d85e3bded764846bc25e1ca36f73b91" // "https://proxy.kyberengineering.io/ethereum"
	rawurl := "https://mainnet.infura.io/v3/c8a0f577c41240ab90d542d4c1f9f1ba"

	// Generate EncodedSwapData
	simClient, err := NewClient(rawurl, SimSwapAddress, commonContract)
	if err != nil {
		panic(err)
	}
	ab, err := abi.JSON(bytes.NewBufferString(simswap.SimSwapMetaData.ABI))
	if err != nil {
		panic(err)
	}
	//ab, err := abi.JSON(bytes.NewBufferString(oneinch.OneInchRouterMetaData.ABI))
	//if err != nil {
	//	panic(err)
	//}
	data, err := ab.Pack("simswap", DAIContract, KNCContract, Router, hexutil.MustDecode(InputData))
	if err != nil {
		panic(err)
	}
	msg := ethereum.CallMsg{
		From:      MyWallet,
		To:        &SimSwapAddress,
		Gas:       1000000,
		GasPrice:  FloatToTokenAmount(100, 9),
		GasFeeCap: FloatToTokenAmount(100, 9),
		GasTipCap: FloatToTokenAmount(100, 9),
		Value:     big.NewInt(0),
		Data:      data,
	}
	res, err := simClient.CallContract(context.Background(), msg, nil)
	if err != nil {
		panic(err)
	}

	//fmt.Println("res", res, string(res))

	result, err := ab.Unpack("simswap", res)
	if err != nil {
		panic(err)
	}
	fmt.Println("result", result)

	abOneInch, err := abi.JSON(bytes.NewBufferString(oneinch.OneInchRouterMetaData.ABI))
	if err != nil {
		panic(err)
	}
	resultOneInch, err := abOneInch.Unpack("swap", result[2].([]byte))
	if err != nil {
		panic(err)
	}
	fmt.Println("result 1inch", resultOneInch)

	fmt.Println("Execution time: ", time.Now().Sub(startTime))
}

func NewClient(rpcURL string, simAddress common.Address, commonContract *OverrideAccounts) (*ethclient.Client, error) {
	httpClient := http.DefaultClient

	sc, err := newSimClient(rpcURL, httpClient, commonContract)
	if err != nil {
		return nil, err
	}

	return sc, nil
}

func newSimClient(url string, client *http.Client, commonContract *OverrideAccounts) (*ethclient.Client, error) {
	round, err := newRoundTripExt(client, commonContract)
	if err != nil {
		return nil, err
	}

	cc := &http.Client{Transport: round}
	r, err := rpc.DialHTTPWithClient(url, cc)
	if err != nil {
		return nil, errors.WithMessage(err, "simclient: dial rpc")
	}

	ethClient := ethclient.NewClient(r)

	return ethClient, nil
}

func newRoundTripExt(c *http.Client, accounts *OverrideAccounts) (http.RoundTripper, error) {
	data, err := json.Marshal(accounts)
	if err != nil {
		return nil, err
	}
	return &roundTripperExt{
		c:          c,
		appendData: data,
	}, nil
}

func (r roundTripperExt) RoundTrip(request *http.Request) (*http.Response, error) {
	// Trick: append Config OrderrideAcount to eth_call
	rt := request.Clone(context.Background())
	body, _ := ioutil.ReadAll(request.Body)
	_ = request.Body.Close()
	if len(body) > 0 {
		rt.Body = ioutil.NopCloser(bytes.NewBuffer(body))
		request.Body = ioutil.NopCloser(bytes.NewBuffer(body))
	}
	var req reqMessage
	if err := json.Unmarshal(body, &req); err == nil {
		if req.Method == "eth_call" {
			req.Params = append(req.Params, r.appendData)
		}
		d2, err := json.Marshal(req)
		if err != nil {
			panic(err)
		}
		rt.ContentLength = int64(len(d2))
		rt.Body = ioutil.NopCloser(bytes.NewBuffer(d2))
	}
	return r.c.Do(rt)
}

func FloatToTokenAmount(amount float64, decimals int64) *big.Int {
	weiFloat := big.NewFloat(amount)
	decimalsBigFloat := big.NewFloat(0).SetInt(Exp10(decimals))
	amountBig := new(big.Float).Mul(weiFloat, decimalsBigFloat)
	r, _ := amountBig.Int(nil)

	return r
}

// Exp10 ...
func Exp10(n int64) *big.Int {
	return new(big.Int).Exp(big.NewInt(expBase), big.NewInt(n), nil)
}

func toHashString(hexStr string) string {
	str := strings.Replace(hexStr, "0x", "", -1)
	str = strings.ToLower(str)
	return fmt.Sprintf("%064v", str)
}

func getIndexBalanceOf(owner string, slot string) common.Hash {
	slot = toHashString(slot)
	owner = toHashString(owner)

	index := solsha3.SoliditySHA3(
		// types
		[]string{"address", "uint256"},

		// values
		[]interface{}{
			owner,
			slot,
		},
	)
	return common.BytesToHash(index)
}

func getIndexAllowance(owner string, spender string, slot string) common.Hash {
	slot = toHashString(slot)
	owner = toHashString(owner)
	temp := solsha3.SoliditySHA3(
		// types
		[]string{"address", "uint256"},

		// values
		[]interface{}{
			owner,
			slot,
		},
	)
	tempStr := toHashString(common.BytesToHash(temp).String())
	spender = toHashString(spender)
	index := solsha3.SoliditySHA3(
		// types
		[]string{"address", "address"},

		// values
		[]interface{}{
			spender,
			tempStr,
		},
	)
	return common.BytesToHash(index)
}
